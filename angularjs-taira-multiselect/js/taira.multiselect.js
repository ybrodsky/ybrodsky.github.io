"use strict";angular.module("taira-multiselect",["ng"]).directive("tairaMultiselect",["$sce","$templateCache",function(e,t){return{restrict:"AE",scope:{model:"=",options:"=",settings:"="},templateUrl:"teh-template",link:function(t,n,s){function l(e){var n={};return t._settings.selectProperty.length?(angular.forEach(t._settings.selectProperty,function(t){n[t]=e[t]}),n):angular.copy(e)}t._settings={displayFieldType:"array",displayField:["id"],displayFieldPrependHTML:"",btnClass:"btn-primary",menuClass:"",selectProperty:[],btnText:"Multiselect",btnCountSelected:!1,open:!1,selectAll:!0,unselectAll:!0,showCheckbox:!0,selectedPrependHTML:""},angular.extend(t._settings,t.settings||[]),t._settings.selectedPrependHTML&&(t._settings.selectedPrependHTML=e.trustAsHtml(t._settings.selectedPrependHTML)),t._settings.displayFieldPrependHTML&&(t._settings.displayFieldPrependHTML=e.trustAsHtml(t._settings.displayFieldPrependHTML)),t.getDisplayText=function(e){var n="";return"array"==t._settings.displayFieldType?t._settings.displayField.forEach(function(t){n+=e[t]+" "}):"string"==t._settings.displayFieldType&&(n=t._settings.displayField),n.trim()},t.checkboxClick=function(e,n){t.selectItem(n),e.stopImmediatePropagation()},t.selectItem=function(e){e=l(e),-1!==_.findIndex(t.model,e)?t.model.splice(_.findIndex(t.model,e),1):t.model.push(e)},t.isChecked=function(e){return e=l(e),-1!==_.findIndex(t.model,e)},t.selectAll=function(){t.unselectAll(),angular.forEach(t.options,function(e){t.selectItem(e)})},t.unselectAll=function(){t.model=[]}}}}]).run(["$templateCache",function(e){var t='<div class="btn-group" uib-dropdown auto-close="disabled" is-open="_settings.open"><button type="button" class="btn {{_settings.btnClass}}" uib-dropdown-toggle ng-disabled="disabled">{{_settings.btnCountSelected ? (model.length ?  model.length : "none") + " selected" : _settings.btnText}} <span class="caret"></span></button><ul class="dropdown-menu {{_settings.menuClass}}" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li ng-if="_settings.selectAll"><a href="" ng-click="selectAll()">Select all</a></li><li ng-if="_settings.unselectAll"><a href="" ng-click="unselectAll()">Unselect all</a></li><li ng-if="_settings.unselectAll || _settings.selectAll" class="divider"></li><li ng-repeat="option in options" role="menuitem"><a href="" ng-click="selectItem(option)"><span ng-if="!_settings.showCheckbox && _settings.selectedPrependHTML && isChecked(option)" ng-bind-html="_settings.selectedPrependHTML"></span><input type="checkbox" ng-if="_settings.showCheckbox" ng-click="checkboxClick($event, option)" ng-checked="isChecked(option)">&nbsp;<span ng-if="_settings.displayFieldPrependHTML" ng-bind-html="_settings.displayFieldPrependHTML"></span>{{getDisplayText(option)}}</a></li></ul></div>';e.put("teh-template",t)}]);