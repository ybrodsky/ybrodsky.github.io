"use strict";angular.module("taira-multiselect",["ng"]).directive("tairaMultiselect",["$sce","$templateCache",function(e,t){return{restrict:"AE",scope:{model:"=",options:"=",settings:"="},templateUrl:"teh-template",link:function(t,n,s){function l(e,t){e=angular.copy(e),t=t.split(".");for(var n=0;n<t.length;n++)e=e[t[n]];return e}function i(e){var n={};return t._settings.select.fields.length?(angular.forEach(t._settings.select.fields,function(t){n[t]=e[t]}),n):angular.copy(e)}t._settings={display:{fields:["id"],prepend:"",append:""},btn:{text:"Multiselect",class:"btn-primary",count:!1},list:{opened:!1,class:"",selectedClass:""},select:{fields:[]},extra:{selectAll:!0,unselectAll:!0,showCheckbox:!0}},_.extend(t._settings.display,t.settings.display),_.extend(t._settings.btn,t.settings.btn),_.extend(t._settings.list,t.settings.list),_.extend(t._settings.select,t.settings.select),_.extend(t._settings.extra,t.settings.extra),t.getDisplayText=function(n){var s="";return t._settings.display.prepend&&(s+=t._settings.display.prepend),angular.forEach(t._settings.display.fields,function(e){s+=l(n,e)+" "}),t._settings.display.append&&(s+=t._settings.display.append),e.trustAsHtml(s.trim())},t.checkboxClick=function(e,n){t.selectItem(n),e.stopImmediatePropagation()},t.selectItem=function(e){e=i(e),_.findIndex(t.model,e)!==-1?t.model.splice(_.findIndex(t.model,e),1):t.model.push(e)},t.isChecked=function(e){return e=i(e),_.findIndex(t.model,e)!==-1},t.selectAll=function(){t.unselectAll(),angular.forEach(t.options,function(e){t.selectItem(e)})},t.unselectAll=function(){t.model=[]}}}}]).run(["$templateCache",function(e){var t='<div class="btn-group" uib-dropdown auto-close="disabled" is-open="_settings.list.opened"><button type="button" class="btn {{_settings.btn.class}}" uib-dropdown-toggle>{{_settings.btn.count ? (model.length ?  model.length : "none") + " selected" : _settings.btn.text}} <span class="caret"></span></button><ul class="dropdown-menu {{_settings.list.class}}" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li ng-if="_settings.extra.selectAll"><a href="" ng-click="selectAll()">Select all</a></li><li ng-if="_settings.extra.unselectAll"><a href="" ng-click="unselectAll()">Unselect all</a></li><li ng-if="_settings.extra.unselectAll || _settings.extra.selectAll" class="divider"></li><li ng-repeat="option in options" role="menuitem" ng-class="{\'{{_settings.list.selectedClass}}\': isChecked(option)}"><a href="" ng-click="selectItem(option)"><input type="checkbox" ng-if="_settings.extra.showCheckbox" ng-click="checkboxClick($event, option)" ng-checked="isChecked(option)">&nbsp;<span ng-bind-html="getDisplayText(option)"></span></a></li></ul></div>';e.put("teh-template",t)}]);